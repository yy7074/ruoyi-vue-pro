# è‹¥ä¾Vue Pro é¡¹ç›®éƒ¨ç½²æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**è‹¥ä¾Vue Pro** æ˜¯ä¸€ä¸ªåŸºäº Spring Boot + Vue çš„ä¼ä¸šçº§å¿«é€Ÿå¼€å‘å¹³å°ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„

**åç«¯æŠ€æœ¯æ ˆï¼š**
- **æ¡†æ¶**: Spring Boot 2.7.18 + Spring Security
- **æ•°æ®åº“**: MySQL 5.7/8.0+ã€Redis 5.0+
- **ORM**: MyBatis Plus 3.5.7
- **å·¥ä½œæµ**: Flowable 6.8.0
- **ä»»åŠ¡è°ƒåº¦**: Quartz 2.3.2
- **APIæ–‡æ¡£**: Springdoc + Knife4j
- **ç›‘æ§**: Spring Boot Admin + SkyWalking

**å‰ç«¯æŠ€æœ¯æ ˆï¼š**
- **Vue3 + Element Plus** (ä¸»æ¨ç‰ˆæœ¬)
- **Vue3 + Vben(Ant Design Vue)**
- **Vue2 + Element UI** (å…¼å®¹ç‰ˆæœ¬)

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

- **ç³»ç»Ÿç®¡ç†**: ç”¨æˆ·ã€è§’è‰²ã€èœå•ã€éƒ¨é—¨ã€å²—ä½ã€å­—å…¸ç­‰
- **åŸºç¡€è®¾æ–½**: ä»£ç ç”Ÿæˆã€ç³»ç»Ÿæ¥å£ã€å®šæ—¶ä»»åŠ¡ã€æ–‡ä»¶ç®¡ç†ç­‰
- **å·¥ä½œæµç¨‹**: åŸºäºFlowableçš„æµç¨‹è®¾è®¡å™¨å’Œå®¡æ‰¹æµç¨‹
- **æ”¯ä»˜ç³»ç»Ÿ**: æ”¯æŒæ”¯ä»˜å®ã€å¾®ä¿¡ç­‰å¤šç§æ”¯ä»˜æ–¹å¼
- **ä¼šå‘˜ä¸­å¿ƒ**: ä¼šå‘˜ç®¡ç†ã€ç§¯åˆ†ã€ç­‰çº§ç­‰
- **å•†åŸç³»ç»Ÿ**: å®Œæ•´çš„ç”µå•†è§£å†³æ–¹æ¡ˆ
- **CRMç³»ç»Ÿ**: å®¢æˆ·å…³ç³»ç®¡ç†
- **ERPç³»ç»Ÿ**: ä¼ä¸šèµ„æºè§„åˆ’
- **AIå¤§æ¨¡å‹**: é›†æˆå¤šç§AIæœåŠ¡

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

### åŸºç¡€ç¯å¢ƒ
- **JDK**: 1.8+ (æ¨è JDK 8)
- **Maven**: 3.6+
- **Node.js**: 16+ (å‰ç«¯æ„å»º)
- **MySQL**: 5.7+ æˆ– 8.0+
- **Redis**: 5.0+

### å¯é€‰ç¯å¢ƒ
- **Docker**: 20.10+ (å®¹å™¨åŒ–éƒ¨ç½²)
- **Docker Compose**: 2.0+ (å®¹å™¨ç¼–æ’)
- **Nginx**: 1.20+ (åå‘ä»£ç†)

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDocker Compose ä¸€é”®éƒ¨ç½² (æ¨è)

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://gitee.com/zhijiantianya/ruoyi-vue-pro.git
cd ruoyi-vue-pro
```

#### 2. æ„å»ºåç«¯JARåŒ…
```bash
# åˆ›å»ºMavenç¼“å­˜å·
docker volume create --name yudao-maven-repo

# ä½¿ç”¨Dockeræ„å»ºJARåŒ…
docker run -it --rm --name yudao-maven \
    -v yudao-maven-repo:/root/.m2 \
    -v $PWD:/usr/src/mymaven \
    -w /usr/src/mymaven \
    maven mvn clean install package '-Dmaven.test.skip=true'
```

#### 3. å¯åŠ¨æœåŠ¡
```bash
cd script/docker
docker compose --env-file docker.env up -d
```

#### 4. è®¿é—®ç³»ç»Ÿ
- **ç®¡ç†åå°**: http://localhost:8080
- **APIæ¥å£**: http://localhost:48080
- **æ¥å£æ–‡æ¡£**: http://localhost:48080/swagger-ui
- **é»˜è®¤è´¦å·**: admin / admin123

### æ–¹å¼äºŒï¼šä¼ ç»Ÿéƒ¨ç½²

#### 1. æ•°æ®åº“å‡†å¤‡

**å®‰è£…MySQL**
```bash
# CentOS/RHEL
sudo yum install mysql-server
sudo systemctl start mysqld
sudo systemctl enable mysqld

# Ubuntu/Debian
sudo apt update
sudo apt install mysql-server
sudo systemctl start mysql
sudo systemctl enable mysql
```

**åˆ›å»ºæ•°æ®åº“**
```sql
CREATE DATABASE `ruoyi-vue-pro` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

**å¯¼å…¥æ•°æ®**
```bash
mysql -u root -p ruoyi-vue-pro < sql/mysql/ruoyi-vue-pro.sql
mysql -u root -p ruoyi-vue-pro < sql/mysql/quartz.sql
```

#### 2. Rediså®‰è£…
```bash
# CentOS/RHEL
sudo yum install redis
sudo systemctl start redis
sudo systemctl enable redis

# Ubuntu/Debian
sudo apt install redis-server
sudo systemctl start redis-server
sudo systemctl enable redis-server
```

#### 3. åç«¯éƒ¨ç½²

**ä¿®æ”¹é…ç½®æ–‡ä»¶**
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim yudao-server/src/main/resources/application-local.yaml
```

**å…³é”®é…ç½®é¡¹ï¼š**
```yaml
spring:
  datasource:
    dynamic:
      datasource:
        master:
          url: jdbc:mysql://127.0.0.1:3306/ruoyi-vue-pro?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&nullCatalogMeansCurrent=true
          username: root
          password: ä½ çš„æ•°æ®åº“å¯†ç 
  redis:
    host: 127.0.0.1
    port: 6379
    database: 0
    # password: ä½ çš„Rediså¯†ç 
```

**ç¼–è¯‘æ‰“åŒ…**
```bash
mvn clean package -Dmaven.test.skip=true
```

**å¯åŠ¨æœåŠ¡**
```bash
cd yudao-server/target
java -jar yudao-server.jar --spring.profiles.active=local
```

#### 4. å‰ç«¯éƒ¨ç½²

**å®‰è£…ä¾èµ–**
```bash
# è¿›å…¥å‰ç«¯ç›®å½• (ä»¥Vue3ç‰ˆæœ¬ä¸ºä¾‹)
cd yudao-ui/yudao-ui-admin-vue3

# å®‰è£…ä¾èµ–
npm install
# æˆ–ä½¿ç”¨yarn
yarn install
```

**ä¿®æ”¹é…ç½®**
```bash
# ä¿®æ”¹APIåœ°å€
vim .env.production
```

```env
# ç”Ÿäº§ç¯å¢ƒé…ç½®
VUE_APP_BASE_API = 'http://ä½ çš„æœåŠ¡å™¨IP:48080/admin-api'
```

**æ„å»ºéƒ¨ç½²**
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:prod

# éƒ¨ç½²åˆ°Nginx
sudo cp -r dist/* /var/www/html/
```

## ğŸ”§ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### Nginxé…ç½®

**å®‰è£…Nginx**
```bash
# CentOS/RHEL
sudo yum install nginx

# Ubuntu/Debian
sudo apt install nginx
```

**é…ç½®æ–‡ä»¶** (`/etc/nginx/sites-available/yudao`)
```nginx
server {
    listen 80;
    server_name ä½ çš„åŸŸå;
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
    
    # APIä»£ç†
    location /admin-api/ {
        proxy_pass http://127.0.0.1:48080/admin-api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶
    client_max_body_size 50M;
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
}
```

**å¯ç”¨é…ç½®**
```bash
sudo ln -s /etc/nginx/sites-available/yudao /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### ç³»ç»ŸæœåŠ¡é…ç½®

**åˆ›å»ºsystemdæœåŠ¡** (`/etc/systemd/system/yudao.service`)
```ini
[Unit]
Description=Yudao Application
After=network.target

[Service]
Type=simple
User=yudao
WorkingDirectory=/opt/yudao
ExecStart=/usr/bin/java -jar -Xms512m -Xmx1024m -Dspring.profiles.active=prod /opt/yudao/yudao-server.jar
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

**å¯åŠ¨æœåŠ¡**
```bash
sudo systemctl daemon-reload
sudo systemctl enable yudao
sudo systemctl start yudao
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. æ•°æ®åº“å®‰å…¨
```sql
-- åˆ›å»ºä¸“ç”¨æ•°æ®åº“ç”¨æˆ·
CREATE USER 'yudao'@'localhost' IDENTIFIED BY 'å¼ºå¯†ç ';
GRANT ALL PRIVILEGES ON ruoyi_vue_pro.* TO 'yudao'@'localhost';
FLUSH PRIVILEGES;
```

### 2. Rediså®‰å…¨
```bash
# ç¼–è¾‘Redisé…ç½®
sudo vim /etc/redis/redis.conf

# è®¾ç½®å¯†ç 
requirepass ä½ çš„Rediså¯†ç 

# ç»‘å®šIP
bind 127.0.0.1

# é‡å¯Redis
sudo systemctl restart redis
```

### 3. é˜²ç«å¢™é…ç½®
```bash
# å¼€æ”¾å¿…è¦ç«¯å£
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --permanent --add-port=48080/tcp
sudo firewall-cmd --reload
```

## ğŸ“Š ç›‘æ§é…ç½®

### 1. åº”ç”¨ç›‘æ§
ç³»ç»Ÿå†…ç½®Spring Boot Adminç›‘æ§ï¼Œè®¿é—®ï¼š
- ç›‘æ§åœ°å€: http://ä½ çš„åŸŸå:48080/admin

### 2. æ—¥å¿—é…ç½®
```yaml
# application-prod.yaml
logging:
  file:
    name: /var/log/yudao/application.log
  level:
    root: INFO
    cn.iocoder.yudao: DEBUG
```

### 3. å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:48080/actuator/health

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
curl http://localhost:48080/actuator/health/db
```

## ğŸ”„ å¤‡ä»½ç­–ç•¥

### 1. æ•°æ®åº“å¤‡ä»½
```bash
#!/bin/bash
# backup.sh
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backup/mysql"
mkdir -p $BACKUP_DIR

mysqldump -u root -p ruoyi-vue-pro > $BACKUP_DIR/ruoyi-vue-pro_$DATE.sql
gzip $BACKUP_DIR/ruoyi-vue-pro_$DATE.sql

# åˆ é™¤7å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.sql.gz" -mtime +7 -delete
```

### 2. å®šæ—¶å¤‡ä»½
```bash
# æ·»åŠ åˆ°crontab
crontab -e

# æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * /path/to/backup.sh
```

## ğŸš¨ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**1. å¯åŠ¨å¤±è´¥**
```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/yudao/application.log

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 48080
```

**2. æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥MySQLçŠ¶æ€
sudo systemctl status mysql

# æµ‹è¯•è¿æ¥
mysql -u yudao -p -h localhost ruoyi-vue-pro
```

**3. Redisè¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥RedisçŠ¶æ€
sudo systemctl status redis

# æµ‹è¯•è¿æ¥
redis-cli ping
```

**4. å‰ç«¯è®¿é—®404**
```bash
# æ£€æŸ¥Nginxé…ç½®
sudo nginx -t

# æŸ¥çœ‹Nginxæ—¥å¿—
tail -f /var/log/nginx/error.log
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. JVMä¼˜åŒ–
```bash
# ç”Ÿäº§ç¯å¢ƒJVMå‚æ•°
JAVA_OPTS="-Xms2g -Xmx4g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+HeapDumpOnOutOfMemoryError"
```

### 2. æ•°æ®åº“ä¼˜åŒ–
```sql
-- MySQLé…ç½®ä¼˜åŒ–
[mysqld]
innodb_buffer_pool_size = 1G
innodb_log_file_size = 256M
max_connections = 1000
query_cache_size = 128M
```

### 3. Redisä¼˜åŒ–
```bash
# Redisé…ç½®ä¼˜åŒ–
maxmemory 2gb
maxmemory-policy allkeys-lru
save 900 1
save 300 10
save 60 10000
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **å®˜æ–¹æ–‡æ¡£**: https://doc.iocoder.cn/
- **æ¼”ç¤ºåœ°å€**: http://dashboard-vue3.yudao.iocoder.cn
- **æºç åœ°å€**: https://gitee.com/zhijiantianya/ruoyi-vue-pro
- **QQç¾¤**: è§å®˜æ–¹æ–‡æ¡£

## ğŸ“ æ›´æ–°æ—¥å¿—

### ç‰ˆæœ¬ 2.6.0-jdk8-SNAPSHOT
- æ”¯æŒJDK 8 + Spring Boot 2.7
- æ–°å¢AIå¤§æ¨¡å‹æ¨¡å—
- ä¼˜åŒ–å·¥ä½œæµå¼•æ“
- å¢å¼ºå®‰å…¨æ€§é…ç½®

---

**æ³¨æ„**: æœ¬æ–‡æ¡£åŸºäºé¡¹ç›®å½“å‰ç‰ˆæœ¬ç¼–å†™ï¼Œéƒ¨ç½²å‰è¯·ç¡®è®¤ç‰ˆæœ¬å…¼å®¹æ€§ã€‚ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ã€‚ 